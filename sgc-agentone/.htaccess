RewriteEngine On

# Protection des fichiers sensibles
<Files ~ "\.(json|log|sqlite3?)$">
    Deny from all
</Files>

# Protection du dossier data (base de données)
<IfModule mod_rewrite.c>
    RewriteRule ^data/ - [F,L]
</IfModule>

# Redirection de toutes les requêtes vers le router SGC-AgentOne
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ core/router.php [QSA,L]

# Cache désactivé pour développement
<IfModule mod_headers.c>
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
</IfModule>

# Optimisations PHP pour hébergement mutualisé
<IfModule mod_php.c>
    php_value max_execution_time 60
    php_value memory_limit 128M
    php_value post_max_size 16M
    php_value upload_max_filesize 16M
</IfModule>